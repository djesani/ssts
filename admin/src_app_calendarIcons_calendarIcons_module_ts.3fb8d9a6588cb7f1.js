"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([["src_app_calendarIcons_calendarIcons_module_ts"],{7993:(Y,g,r)=>{r.r(g),r.d(g,{CalendarIconsModule:()=>D});var l=r(9808),f=r(520),s=r(3075),_=r(9664),d=r(2626),m=r(2340),e=r(4893);const u=`${m.N.CONTEXT_PATH}/events`;let p=(()=>{class n{constructor(t){this.http=t}getAll(){return this.http.get(u)}get(t){return this.http.get(`${u}/${t}`)}add(t){return this.http.post(u,t)}update(t,a){return this.http.patch(`${u}/${t}`,a)}delete(t){return this.http.delete(`${u}/${t}`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var A=r(9444);let Z=(()=>{class n{transform(t,a,o){return o?(t||[]).filter(c=>a.split(",").some(h=>c.hasOwnProperty(h)&&new RegExp(o,"gi").test(c[h]))):t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"search",type:n,pure:!0}),n})();function T(n,i){if(1&n&&(e.TgZ(0,"div",19)(1,"div",14)(2,"div",20),e._uU(3),e.qZA()(),e.TgZ(4,"div",16),e._UZ(5,"img",21),e.qZA(),e.TgZ(6,"div",22)(7,"button",23),e._uU(8,"Edit"),e.qZA()()()),2&n){const t=i.$implicit,a=e.oxw(2);e.xp6(3),e.Oqu(t.name),e.xp6(2),e.hYB("src","",a.LOCAL_PATH,"",t.imageurl,"",e.LSH),e.xp6(2),e.MGl("routerLink","edit/",t.filename,"")}}const x=function(){return["fas","search"]};function y(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"header",4)(3,"div",5)(4,"div",6)(5,"button",7),e._uU(6,"Add"),e.qZA()(),e.TgZ(7,"div",8)(8,"div",9)(9,"input",10),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().query=o}),e.qZA(),e._UZ(10,"fa-icon",11),e.qZA()()()()(),e.TgZ(11,"div",12)(12,"div",13)(13,"div",14),e._uU(14," Name "),e.qZA(),e.TgZ(15,"div",15),e._uU(16," Icon "),e.qZA(),e._UZ(17,"div",16)(18,"div",17),e.qZA(),e.YNc(19,T,9,4,"div",18),e.ALo(20,"search"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(9),e.Q6J("ngModel",t.query),e.xp6(1),e.Q6J("icon",e.DdM(7,x)),e.xp6(9),e.Q6J("ngForOf",e.Dn7(20,3,t.calendarIcons,"name",t.query))}}let F=(()=>{class n{constructor(t){this.calendarIconsService=t,this.LOCAL_PATH=m.N.LOCAL_PATH}ngOnInit(){this.calendarIconsService.getAll().subscribe(t=>{this.calendarIcons=t}),this.isSideMenuShow()}isSideMenuShow(){"true"==localStorage.getItem("isSideMenuShow")&&(document.getElementById("header-nav").style.marginLeft="250px",document.getElementById("side-nav").style.width="250px",document.getElementById("main-content").style.marginLeft="250px")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-calendarIcons-list"]],decls:2,vars:1,consts:[["id","main-content"],["class","calendarIcons",4,"ngIf"],[1,"calendarIcons"],[1,"header-nav"],["id","header-nav"],[1,"row","add-wrapper"],[1,"col-sm-1","btn-add-container"],["routerLink","add",1,"btn","btn-primary","btn-add"],[1,"col-sm-11"],[1,"header-search-wrapper"],["placeholder","search . . .",1,"header-search-input",3,"ngModel","ngModelChange"],[3,"icon"],[1,"events-list"],[1,"row","row-event-header"],[1,"col-2"],[1,"col-7"],[1,"col-3"],[1,"col-8"],["class","row row-calendarIcon",4,"ngFor","ngForOf"],[1,"row","row-calendarIcon"],[1,"calendarIcon-name"],[1,"thumb",3,"src"],[1,"col-1"],[1,"btn","btn-primary",3,"routerLink"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.YNc(1,y,21,8,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",a.calendarIcons))},directives:[l.O5,d.rH,s.Fj,s.JJ,s.On,A.BN,l.sg],pipes:[Z],encapsulation:2}),n})();function S(n,i){if(1&n&&(e.TgZ(0,"div",8),e._UZ(1,"img",9),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.s9C("src",t.event.imageurl,e.LSH)}}function b(n,i){if(1&n&&(e.TgZ(0,"div",2),e.YNc(1,S,2,1,"div",3),e.TgZ(2,"div",4)(3,"div")(4,"div",5)(5,"div"),e._uU(6),e.qZA()(),e.TgZ(7,"div",6)(8,"div"),e._uU(9),e.qZA()()(),e.TgZ(10,"div",7),e._uU(11),e.qZA()()()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.event.imageurl),e.xp6(5),e.Oqu(t.event.name),e.xp6(3),e.Oqu(t.event.startDate),e.xp6(2),e.Oqu(t.event.description)}}let L=(()=>{class n{constructor(t,a){this.calendarIconsService=t,this.activatedRoute=a,this.getId=this.activatedRoute.snapshot.paramMap.get("id")}ngOnInit(){this.calendarIconsService.getAll().subscribe(t=>{this.calendarIcons=t,this.event=this.calendarIcons.find(a=>a.name=this.getId)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p),e.Y36(d.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-calendarIcons-detail"]],decls:2,vars:1,consts:[["id","main-content"],["class","detail",4,"ngIf"],[1,"detail"],["class","thumb",4,"ngIf"],[1,"calendarIcons-text"],[1,"name"],[1,"startDate"],[1,"description"],[1,"thumb"],[1,"thumb-img",3,"src"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.YNc(1,b,12,4,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",a.calendarIcons))},directives:[l.O5],encapsulation:2}),n})();var I=r(6913),U=r(8441),w=r(8420);const E=["name"];function N(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"Edit "),e.qZA())}function O(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"Add "),e.qZA())}function q(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"h5",3),e.YNc(2,N,2,0,"span",4),e.YNc(3,O,2,0,"span",4),e.TgZ(4,"span",5),e._uU(5,"Event"),e.qZA()(),e.TgZ(6,"div",6)(7,"form",7),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().eventFormSubmit()}),e.TgZ(8,"div",8)(9,"div",9)(10,"div",10)(11,"label"),e._uU(12,"Name"),e.qZA(),e._UZ(13,"input",11),e.TgZ(14,"div",12),e._uU(15,"Name is required"),e.qZA()()(),e.TgZ(16,"div",9),e._UZ(17,"div",8),e.TgZ(18,"div",8)(19,"div",13)(20,"label"),e._uU(21,"Image URL"),e.qZA(),e.TgZ(22,"div",14)(23,"div",15),e._UZ(24,"img",16),e.qZA(),e.TgZ(25,"label",17)(26,"input",18),e.NdJ("uploadOutput",function(o){return e.CHM(t),e.oxw().onUploadOutput(o)}),e.qZA(),e.TgZ(27,"div",12),e._uU(28,"Image URL is required"),e.qZA()()(),e.TgZ(29,"div",12),e._uU(30,"Image URL is required"),e.qZA()()()()(),e.TgZ(31,"div",19)(32,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().cancelEvent()}),e._uU(33,"Cancel"),e.qZA(),e.TgZ(34,"button",21),e._uU(35,"Save"),e.qZA()()()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.isEdit),e.xp6(1),e.Q6J("ngIf",!t.isEdit),e.xp6(4),e.Q6J("formGroup",t.eventForm),e.xp6(17),e.hYB("src","",t.LOCAL_PATH,"",t.event.imageurl,"",e.LSH),e.xp6(2),e.Q6J("uploadInput",t.uploadInput)}}new Date;let C=(()=>{class n{constructor(t,a,o,c,h){this.router=t,this.activatedRoute=a,this.formBuilder=o,this.calendarIconsService=c,this.loader=h,this.LOCAL_PATH=m.N.LOCAL_PATH,this.getId=this.activatedRoute.snapshot.paramMap.get("id"),this.urlSegments=this.activatedRoute.snapshot.url,this.hasEdit(),this.options={concurrency:1,maxUploads:3,maxFileSize:1e6},this.files=[],this.uploadInput=new e.vpe,this.humanizeBytes=I.kK}ngOnInit(){this.buildForm(),this.setAddEditValidators(),this.loadData(),this.isSideMenuShow()}ngAfterViewInit(){setTimeout(()=>this.inputEl.nativeElement.focus(),2e3)}loadData(){this.calendarIconsService.getAll().subscribe(t=>{this.calendarIcons=t,this.isEdit?(this.event=this.calendarIcons.find(a=>a.filename==this.getId),this.setData()):this.event={}})}buildForm(){this.eventForm=this.formBuilder.group({name:["",s.kI.required],imageName:[null],imageurl:[null],filename:[null]})}setAddEditValidators(){const t=this.eventForm.get("imageName");t.setValidators(this.isEdit?null:[s.kI.required]),t.updateValueAndValidity()}isSideMenuShow(){"true"==localStorage.getItem("isSideMenuShow")&&(document.getElementById("header-nav").style.marginLeft="250px",document.getElementById("side-nav").style.width="250px",document.getElementById("main-content").style.marginLeft="250px")}eventFormSubmit(){this.eventForm.markAllAsTouched(),this.eventForm.valid&&this.saveEvent()}get eventFormControls(){return this.eventForm.controls}hasEdit(){this.urlSegments.forEach(t=>{if("edit"==t.path)return this.isEdit=!0})}setData(){this.eventForm.get("name").setValue(this.event.name),this.eventForm.get("imageurl").setValue(this.event.imageurl),this.eventForm.get("filename").setValue(this.event.filename),this.eventForm.get("imageName").setValue("")}getData(){this.event.name=this.eventForm.get("name").value,this.event.imageurl=this.eventForm.get("imageurl").value,this.event.filename=this.eventForm.get("filename").value}saveEvent(){this.getData(),this.isEdit?this.calendarIconsService.update(this.event.filename,this.event).subscribe(t=>{console.log("edit-data",t)},t=>{this.router.navigate(["/calendarIcons"])},()=>{console.log("success"),this.router.navigate(["/calendarIcons"])}):this.calendarIconsService.add(this.event).subscribe(t=>{console.log("add-data",t)},t=>{this.router.navigate(["/calendarIcons"])},()=>{console.log("success"),this.router.navigate(["/calendarIcons"])})}cancelEvent(){this.router.navigate(["/calendarIcons"])}onUploadOutput(t){switch(t.type){case"allAddedToQueue":this.uploadInput.emit({type:"uploadAll",url:`${m.N.CONTEXT_PATH}/fileupload`,method:"POST"});break;case"addedToQueue":void 0!==t.file&&this.files.push(t.file);break;case"uploading":if(void 0!==t.file){const o=this.files.findIndex(c=>void 0!==t.file&&c.id===t.file.id);this.files[o]=t.file}break;case"removed":this.files=this.files.filter(o=>o!==t.file);break;case"dragOver":this.dragOver=!0;break;case"dragOut":case"drop":this.dragOver=!1;break;case"done":this.event.imageurl="/images/events/"+t.file.name}}cancelUpload(t){this.uploadInput.emit({type:"cancel",id:t})}removeFile(t){this.uploadInput.emit({type:"remove",id:t})}removeAllFiles(){this.uploadInput.emit({type:"removeAll"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.F0),e.Y36(d.gz),e.Y36(s.qu),e.Y36(p),e.Y36(U.LA))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-calendarIcons-form"]],viewQuery:function(t,a){if(1&t&&e.Gf(E,5),2&t){let o;e.iGM(o=e.CRH())&&(a.inputEl=o.first)}},decls:2,vars:1,consts:[["id","main-content"],["class","card event",4,"ngIf"],[1,"card","event"],[1,"card-header"],[4,"ngIf"],[1,"name"],[1,"card-body"],["ScrollToInvalidControl","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-6"],[1,"form-control-group"],["type","text","formControlName","name",1,"form-control"],[1,"invalid-feedback"],[1,"form-control-group","image-url-fcg"],[1,"input-group","file-upload"],[1,"input-group-prepend"],[1,"thumb",3,"src"],[1,"upload-button"],["type","file","ngFileSelect","","formControlName","imageName",1,"form-control","file",3,"uploadInput","uploadOutput"],[1,"action-buttons"],[1,"btn","btn-default",3,"click"],["type","submit",1,"btn","btn-primary"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.YNc(1,q,36,6,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",a.event))},directives:[l.O5,s._Y,s.JL,w.s,s.sg,s.Fj,s.JJ,s.u,I.qx],encapsulation:2}),n})();var v=r(5337);const M=[{path:"",component:F,canActivate:[v.a]},{path:"details/:id",component:L,canActivate:[v.a],data:{permissions:{only:"ADMIN",redirectTo:"login"}}},{path:"add",component:C,canActivate:[v.a],data:{permissions:{only:"ADMIN",redirectTo:"login"}}},{path:"edit/:id",component:C,canActivate:[v.a],data:{permissions:{only:"ADMIN",redirectTo:"login"}}}];let J=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.Bz.forChild(M)],d.Bz]}),n})(),D=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[p],imports:[[l.ez,J,f.JF,s.u5,s.UX,_.m]]}),n})()}}]);