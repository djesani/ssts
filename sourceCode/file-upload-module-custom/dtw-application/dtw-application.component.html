<div class="application-content styles-2022">
    <div class="application-header b-progress-stepper progress-section">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul class="b-progress-stepper__items">
                        <li class="b-progress-stepper__step b-progress-stepper__step--previous"> Property details </li>
                        <li class="b-progress-stepper__step b-progress-stepper__step--current"> Application </li>
                        <li class="b-progress-stepper__step b-progress-stepper__step--"> Submit order </li>
                        <li class="b-progress-stepper__step b-progress-stepper__step--"> Confirmation </li>
                    </ul>
                </div>
            </div>
            <div class="row" *ngIf="cart && cart.applicationOutlines && cart.applicationOutlines.length > 1">
                <div class="col-xs-12">
                    <div class="b-progress-stepper__dropdown">
                        <button id="applicationsDropdownLabel"
                            class="btn btn-secondary b-progress-stepper__dropdown-menu-button" type="button"
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <strong>Application:</strong>
                            {{cart.currentApplicationPosition}} of {{cart.applicationOutlines.length}}
                            <span class="caret pull-right"></span>
                        </button>
                        <ul class="dropdown-menu b-progress-stepper__dropdown-menu"
                            aria-labelledby="applicationsDropdownLabel">
                            <li *ngFor="let outline of cart.applicationOutlines; let i = index"
                                class="b-progress-stepper__dropdown-item"
                                [ngClass]="{'b-progress-stepper__dropdown-item--current': outline.current, 'b-progress-stepper__dropdown-item--complete' : outline.complete}">
                                <a *ngIf="!outline.current"
                                    href="/tapin/secure/application/getDetails?applType={{outline.type}}"
                                    class="btn btn-link continue"
                                    [ngclass]="{'disabled' : outline.current}">{{outline.description}}</a>
                                <div class="dropdown-label" *ngIf="outline.current">{{outline.description}}</div>
                                <!--<button type="button" value="{{outline.type}}" class="btn btn-link remove" formnovalidate><i class="fa fa-times" title="remove"></i></button> -->
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-property-details hidden-print" *ngIf="cart && cart.property">
                <div class="container">
                    <div
                        class="col-xs-12 col-md-10 col-md-offset-1 col-lg-10 col-lg-offset-1 b-property-details__divider">
                        <div class="row">
                            <div class="col-xs-12 col-md-6 b-property-details__address">
                                <i class="fa fa-map-marker"></i>
                                <span>{{cart.property.propertyAddress}}</span>
                            </div>
                            <div class="col-xs-12 col-md-6 b-property-details__numbers">
                                <div class="row">
                                    <div class="col-xs-6 col-md-7 text-right">
                                        <p>
                                            Plan number:
                                            {{cart.property.propertyPlanNumber}}
                                        </p>
                                    </div>
                                    <div class="col-xs-6 col-md-5 text-right">
                                        <p>
                                            Lot number:
                                            {{cart.property.propertyLotNumber}}
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <form [formGroup]="dtwForm" ngxScrollToFirstInvalid class="dtwForm">
        <div class="main-content-wrapper application-body">

            <div class="container main-content">

                <div class="section-arrow section-grey arrow-white"></div>

                <div class="row">
                    <div class="col-xs-12">
                        <h1 class="b-heading b-heading--h1">Discharge trade wastewater application</h1>
                    </div>
                </div>
                <div class="row application-sub-type">
                    <div class="col-xs-12">
                        <h2>New agreement</h2>
                    </div>
                </div>

                <div class="row acknowledgement-hint">
                    <div class="col-xs-12 col-md-8 col-md-offset-2">
                        <div class="row">
                            <div class="col-sm-10 col-sm-offset-1">
                                <div class="card-help">
                                    <div class="card-help-body">
                                        You must ensure the owner of the property and/or their agent is aware of this
                                        application and that this agreement will be (or is being) carried out on the
                                        property.
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="fontSizeM text-center">
                            Please <strong>answer all questions</strong> unless marked optional.
                        </p>

                        <!-- Business details -->
                        <div class="row form-row" [ngClass]="{
                                'row-has-error':      dtwFormControls.businessName.errors?.pattern ||
                                                    ( dtwFormControls.businessName.errors  &&  dtwFormSubmitted ) ||
                                                    ( dtwFormControls.businessName.errors  &&  dtwFormControls.businessName.touched ) ||
    
                                                    ( dtwFormControls.businessEmail.errors  &&  dtwFormSubmitted ) ||
                                                    ( dtwFormControls.businessEmail.errors  &&  dtwFormControls.businessEmail.touched ) ||
    
                                                      dtwFormControls.businessPhoneNumber.errors?.pattern ||
                                                    ( dtwFormControls.businessPhoneNumber.errors  &&  dtwFormSubmitted ) ||
                                                    ( dtwFormControls.businessPhoneNumber.errors  &&  dtwFormControls.businessPhoneNumber.touched )
                            }">
                            <div class="col-sm-10 col-sm-offset-1">

                                <h2 class="highlight-on-error"><span class="question-number counter"></span>
                                    Business details
                                </h2>

                                <!-- Business name -->
                                <div class="row">
                                    <div class="form-group col-sm-12" [ngClass]="{
                                            'has-error':     dtwFormControls.businessName.errors?.pattern ||
                                                           ( dtwFormControls.businessName.errors  &&  dtwFormSubmitted ) ||
                                                           ( dtwFormControls.businessName.errors  &&  dtwFormControls.businessName.touched ) ,
                                            'has-success':  !dtwFormControls.businessName.errors  &&  dtwFormControls.businessName.touched
                                           }">
                                        <label>Business trading name</label>
                                        <input type="text" formControlName="businessName" class="form-control"
                                            [pattern]="textFieldRegex" maxlength="255" />
                                    </div>
                                    <div class="col-sm-12 error help-text required" *ngIf="(
                                            ( dtwFormControls.businessName.errors?.required  &&  dtwFormSubmitted ) ||
                                              dtwFormControls.businessName.errors?.required  &&  dtwFormControls.businessName.touched )
                                            ">
                                        Please enter business name
                                    </div>

                                    <div class="col-sm-12 error help-text pattern"
                                        *ngIf="( dtwFormControls.businessName.errors?.pattern )">
                                        Only use letters, numbers, spaces and &nbsp; - &nbsp; . &nbsp; , &nbsp; & &nbsp;
                                        '
                                    </div>
                                </div>

                                <!-- Business phone number -->
                                <div class="row">
                                    <div class="form-group col-sm-12" [ngClass]="{
                                            'has-error':     dtwFormControls.businessPhoneNumber.errors?.pattern ||
                                                           ( dtwFormControls.businessPhoneNumber.errors  &&  dtwFormSubmitted ) ||
                                                           ( dtwFormControls.businessPhoneNumber.errors  &&  dtwFormControls.businessPhoneNumber.touched ) ,
                                            'has-success':  !dtwFormControls.businessPhoneNumber.errors  &&  dtwFormControls.businessPhoneNumber.touched
                                           }">
                                        <label>Business phone number</label>
                                        <input type="text" formControlName="businessPhoneNumber" class="form-control"
                                            [pattern]="nationalNumberRegex" maxLength="10" minlength="10" />
                                    </div>
                                    <div class="col-sm-12 error help-text required"
                                        *ngIf="( dtwFormControls.businessPhoneNumber.errors?.required  &&  dtwFormControls.businessPhoneNumber.touched ) ||
                                               ( dtwFormControls.businessPhoneNumber.errors?.required  &&  dtwFormSubmitted ) ">
                                        Please enter business phone number
                                    </div>
                                    <div class="col-sm-12 error help-text pattern"
                                        *ngIf="( dtwFormControls.businessPhoneNumber.errors?.pattern )">
                                        Enter as 10-digit number, no other characters
                                    </div>
                                    <div class="col-sm-12 error help-text required" *ngIf="(
                                            ( dtwFormControls.businessPhoneNumber.errors?.minlength &&  dtwFormSubmitted && !dtwFormControls.businessPhoneNumber.errors?.pattern) ||
                                              dtwFormControls.businessPhoneNumber.errors?.minlength  &&  dtwFormControls.businessPhoneNumber.touched && !dtwFormControls.businessPhoneNumber.errors?.pattern)
                                            ">
                                        Must be 10 digits
                                    </div>
                                </div>

                                <!-- Business email -->
                                <div class="row">
                                    <div class="form-group col-sm-12" [ngClass]="{
                                            'has-error':   ( dtwFormControls.businessEmail.errors  &&  dtwFormSubmitted ) ||
                                                           ( dtwFormControls.businessEmail.errors  &&  dtwFormControls.businessEmail.touched ) ,
                                            'has-success':  !dtwFormControls.businessEmail.errors  &&  dtwFormControls.businessEmail.touched
                                           }">
                                        <label>Business email</label>
                                        <input type="email" formControlName="businessEmail" class="form-control"
                                            maxLength="192" />
                                    </div>
                                    <div class="col-sm-12 error help-text required" *ngIf="(
                                              dtwFormControls.businessEmail.errors?.required  &&  dtwFormControls.businessEmail.touched ) ||
                                            ( dtwFormControls.businessEmail.errors?.required  &&  dtwFormSubmitted ) ">
                                        Please enter business email
                                    </div>
                                    <div class="col-sm-12 error help-text pattern"
                                        *ngIf="( dtwFormControls.businessEmail.errors?.email  && dtwFormControls.businessEmail.touched )">
                                        Valid email address required
                                    </div>
                                </div>


                            </div>
                        </div>

                        <!-- On-site contact details -->
                        <div class="row form-row" [ngClass]="{
                            'row-has-error':      dtwFormControls.contactPersonsName.errors?.pattern ||
                                                ( dtwFormControls.contactPersonsName.errors  &&  dtwFormSubmitted ) ||
                                                ( dtwFormControls.contactPersonsName.errors  &&  dtwFormControls.contactPersonsName.touched ) ||
    
                                                ( dtwFormControls.contactPersonsEmail.errors  &&  dtwFormSubmitted ) ||
                                                ( dtwFormControls.contactPersonsEmail.errors  &&  dtwFormControls.contactPersonsEmail.touched ) ||
    
                                                 dtwFormControls.contactPersonsPhoneNumber.errors?.pattern ||
                                                ( dtwFormControls.contactPersonsPhoneNumber.errors  &&  dtwFormSubmitted ) ||
                                                ( dtwFormControls.contactPersonsPhoneNumber.errors  &&  dtwFormControls.contactPersonsPhoneNumber.touched )
                                                
                            }">
                            <div class="col-sm-10 col-sm-offset-1">

                                <h2 class="highlight-on-error"><span class="question-number counter"></span>
                                    On-site contact
                                </h2>

                                <div class="card-help">
                                    <div class="card-help-body">
                                        Site manager or other person responsible for the day-to-day maintenance and
                                        operation of the site or business.
                                    </div>
                                </div>

                                <!-- On-site contact name -->
                                <div class="row">
                                    <div class="form-group col-sm-12" [ngClass]="{
                                            'has-error':     dtwFormControls.contactPersonsName.errors?.pattern ||
                                                           ( dtwFormControls.contactPersonsName.errors  &&  dtwFormSubmitted ) ||
                                                           ( dtwFormControls.contactPersonsName.errors  &&  dtwFormControls.contactPersonsName.touched ) ,
                                            'has-success':  !dtwFormControls.contactPersonsName.errors  &&  dtwFormControls.contactPersonsName.touched
                                           }">
                                        <label>On-site contact name</label>
                                        <input type="text" formControlName="contactPersonsName" class="form-control"
                                            [pattern]="personNameRegex" maxLength="255" [minlength]="3" />
                                    </div>
                                    <div class="col-sm-12 error help-text required" *ngIf="(
                                            ( dtwFormControls.contactPersonsName.errors?.required  &&  dtwFormSubmitted ) ||
                                              dtwFormControls.contactPersonsName.errors?.required  &&  dtwFormControls.contactPersonsName.touched )
                                            ">
                                        Please enter on-site contact name
                                    </div>
                                    <div class="col-sm-12 error help-text required" *ngIf="(
                                            ( dtwFormControls.contactPersonsName.errors?.minlength &&  dtwFormSubmitted ) ||
                                              dtwFormControls.contactPersonsName.errors?.minlength  &&  dtwFormControls.contactPersonsName.touched )
                                            ">
                                        Must be 3 characters or more
                                    </div>
                                    <div class="col-sm-12 error help-text pattern"
                                        *ngIf="( dtwFormControls.contactPersonsName.errors?.pattern )">
                                        Only use letters, numbers, spaces and &nbsp; - &nbsp; . &nbsp; , &nbsp; & &nbsp;
                                        '
                                    </div>
                                </div>

                                <!-- On-site contact phone number -->
                                <div class="row">
                                    <div class="form-group col-sm-12" [ngClass]="{
                                            'has-error':     dtwFormControls.contactPersonsPhoneNumber.errors?.pattern ||
                                                           ( dtwFormControls.contactPersonsPhoneNumber.errors  &&  dtwFormSubmitted ) ||
                                                           ( dtwFormControls.contactPersonsPhoneNumber.errors  &&  dtwFormControls.contactPersonsPhoneNumber.touched ) ,
                                            'has-success':  !dtwFormControls.contactPersonsPhoneNumber.errors  &&  dtwFormControls.contactPersonsPhoneNumber.touched
                                           }">
                                        <label>On-site contact phone number</label>
                                        <input type="text" formControlName="contactPersonsPhoneNumber"
                                            class="form-control" [pattern]="nationalNumberRegex" maxLength="10"
                                            minlength="10" />
                                    </div>
                                    <div class="col-sm-12 error help-text required"
                                        *ngIf="( dtwFormControls.contactPersonsPhoneNumber.errors?.required  &&  dtwFormControls.contactPersonsPhoneNumber.touched ) ||
                                               ( dtwFormControls.contactPersonsPhoneNumber.errors?.required  &&  dtwFormSubmitted ) ">
                                        Please enter on-site contact phone number
                                    </div>

                                    <div class="col-sm-12 error help-text pattern"
                                        *ngIf="( dtwFormControls.contactPersonsPhoneNumber.errors?.pattern )">
                                        Enter as 10-digit number, no other characters
                                    </div>
                                    <div class="col-sm-12 error help-text required" *ngIf="(
                                            ( dtwFormControls.contactPersonsPhoneNumber.errors?.minlength &&  dtwFormSubmitted && !dtwFormControls.contactPersonsPhoneNumber.errors?.pattern) ||
                                              dtwFormControls.contactPersonsPhoneNumber.errors?.minlength  &&  dtwFormControls.contactPersonsPhoneNumber.touched && !dtwFormControls.contactPersonsPhoneNumber.errors?.pattern)
                                            ">
                                        Must be 10 digits
                                    </div>
                                </div>

                                <!-- On-site contact email -->
                                <div class="row">
                                    <div class="form-group col-sm-12" [ngClass]="{
                                            'has-error':   ( dtwFormControls.contactPersonsEmail.errors  &&  dtwFormSubmitted ) ||
                                                           ( dtwFormControls.contactPersonsEmail.errors  &&  dtwFormControls.contactPersonsEmail.touched ) ,
                                            'has-success':  !dtwFormControls.contactPersonsEmail.errors  &&  dtwFormControls.contactPersonsEmail.touched
                                           }">
                                        <label>On-site contact email</label>
                                        <input type="email" formControlName="contactPersonsEmail" class="form-control"
                                            maxLength="192" />
                                    </div>
                                    <div class="col-sm-12 error help-text required"
                                        *ngIf="(
                                              dtwFormControls.contactPersonsEmail.errors?.required  &&  dtwFormControls.contactPersonsEmail.touched ) ||
                                            ( dtwFormControls.contactPersonsEmail.errors?.required  &&  dtwFormSubmitted ) ">
                                        Please enter on-site contact email
                                    </div>

                                    <div class="col-sm-12 error help-text pattern"
                                        *ngIf="( dtwFormControls.contactPersonsEmail.errors?.email  && dtwFormControls.contactPersonsEmail.touched)">
                                        Valid email address required
                                    </div>
                                </div>

                            </div>
                        </div>

                        <!-- Is this an industrial business? -->
                        <div class="row form-row" [ngClass]="{
                                'row-has-error':    ( dtwFormControls.industrialBusiness.errors  &&  dtwFormSubmitted )
                            }">
                            <div class="col-sm-10 col-sm-offset-1">

                                <h2 class="highlight-on-error">
                                    <span class="question-number counter"></span>
                                    Is this an industrial business?
                                </h2>

                                <!-- help hint -->
                                <button class="btn btn-link btn-help" (click)="collapse.toggle()" type="button">
                                    Businesses we consider to be industrial
                                </button>
                                <div #collapse="ngbCollapse" [(ngbCollapse)]="isCollapsedHelpIndustrialBusiness">
                                    <div class="card-help">
                                        <div class="card-help-body">
                                            <p>Examples of industrial businesses:</p>
                                            <ul>
                                                <li>food processing</li>
                                                <li>manufacturing
                                                    <ul>
                                                        <li>tanning and textiles</li>
                                                        <li>pharmaceuticals and cosmetics</li>
                                                        <li>chemicals, plastics and surfactants</li>
                                                        <li>metals and surface coatings</li>
                                                        <li>paper, board, photographic supplies, print material and
                                                            books
                                                        </li>
                                                        <li>cement, stone and abrasives</li>
                                                    </ul>
                                                </li>
                                                <li>petroleum processing</li>
                                                <li>waste and wastewater treatment</li>
                                                <li>sewer mining and decentralised wastewater treatment.</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="industrialBusiness-form-group form-group isPushButtons isYesNo no-label col-sm-12"
                                        [ngClass]="{
                                            'has-error':    ( dtwFormControls.industrialBusiness.errors  &&  dtwFormSubmitted ) ,
                                            'has-success':   !dtwFormControls.industrialBusiness.errors
                                            }">
                                        <!-- <label>Is this a industrial business?</label> -->
                                        <div class="btn-group btn-group-toggle push-buttons" ngbRadioGroup
                                            name="radioBasic" formControlName="industrialBusiness">
                                            <label class="btn btn-default push-button yes" ngbButtonLabel>
                                                <input ngbButton type="radio" [value]="'yes'">
                                                Yes
                                            </label>
                                            <label class="btn btn-default push-button no" ngbButtonLabel>
                                                <input ngbButton type="radio" [value]="'no'">
                                                No
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-sm-12 error help-text required push-buttons" *ngIf="
                                        ( dtwFormControls.industrialBusiness.errors  &&  dtwFormSubmitted )
                                        ">
                                        Please specify if this is an industrial business
                                    </div>
                                </div>

                            </div>
                        </div>

                        <!-- Is this a wholesale business? -->
                        <div class="row form-row wholesaleBusiness" [ngClass]="{
                                'row-has-error':    ( dtwFormControls.wholesaleBusiness.errors  &&  dtwFormSubmitted )
                            }" *ngIf="dtwFormControls.industrialBusiness.value == 'no' ">
                            <div class="col-sm-10 col-sm-offset-1">

                                <h2 class="highlight-on-error">
                                    <span class="question-number counter"></span>
                                    Is this a wholesale business?
                                </h2>

                                <!-- help hint -->
                                <button class="btn btn-link btn-help" (click)="collapse.toggle()" type="button">
                                    Businesses we consider to be wholesale
                                </button>
                                <div #collapse="ngbCollapse" [(ngbCollapse)]="isCollapsedHelpWholesaleBusiness">
                                    <div class="card-help">
                                        <div class="card-help-body">
                                            Food manufacturing produced in commercial quantities (&lt; 12kls per day) to
                                            sell to retailers and other commercial businesses.
                                            Eg: (Wholesale Butcher, BBQ chicken Pork and Duck, Butter manufacturer,
                                            supplies products to cafes and restaurant).
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="wholesaleBusiness-form-group form-group isPushButtons isYesNo no-label col-sm-12"
                                        [ngClass]="{
                                            'has-error':    ( dtwFormControls.wholesaleBusiness.errors  &&  dtwFormSubmitted ) ,
                                            'has-success':   !dtwFormControls.wholesaleBusiness.errors
                                            }">
                                        <!-- <label>Is this a wholesale business?</label> -->
                                        <div class="btn-group btn-group-toggle push-buttons" ngbRadioGroup
                                            name="radioBasic" formControlName="wholesaleBusiness">
                                            <label class="btn btn-default push-button yes" ngbButtonLabel>
                                                <input ngbButton type="radio" [value]="'yes'">
                                                Yes
                                            </label>
                                            <label class="btn btn-default push-button no" ngbButtonLabel>
                                                <input ngbButton type="radio" [value]="'no'">
                                                No
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-sm-12 error help-text required push-buttons" *ngIf="
                                        ( dtwFormControls.wholesaleBusiness.errors  &&  dtwFormSubmitted )
                                        ">
                                        Please specify if this is a wholesale business
                                    </div>
                                </div>

                            </div>
                        </div>

                        <!-- Wholesale: Summary of application requirements -->
                        <div class="row form-row application-requirements-summary"
                            *ngIf="dtwFormControls.wholesaleBusiness.value == 'yes' && dtwFormControls.industrialBusiness.value == 'no'">
                            <div class="col-sm-10 col-sm-offset-1">
                                <div class="info-alert">
                                    <div class="header">Summary of application requirements</div>

                                    <div class="alert-section">
                                        <div class="alert-section-header">What you need to provide</div>
                                        <ul>
                                            <li>Details of the following equipment:
                                                <ul class="min-req-points">
                                                    <li class="in-floor-bucket-trap">in-floor bucket traps</li>
                                                    <li class="in-sink-bucket-trap">in-sink bucket traps</li>
                                                    <li class="in-floor-bucket-trap">grease traps or centralised
                                                        pre-treatment unit</li>
                                                </ul>
                                            </li>
                                            <li>
                                                A letter from hydraulic consultant specifying pre-treatment
                                                requirements.
                                            </li>
                                        </ul>
                                    </div>

                                    <div class="alert-section other-requirements">
                                        <div class="alert-section-header">Other requirements</div>
                                        <ul>
                                            <li>
                                                You must engage a backflow-accredited licensed plumber to install
                                                and
                                                test the backflow containment devices at the property boundary next
                                                to
                                                the water meter servicing your property.
                                            </li>
                                            <li>
                                                You must install a tap within 5 metres of any pre-treatment
                                                (e.g. grease trap), and a backflow prevention device on the inlet
                                                side
                                                of the tap.
                                            </li>
                                            <li *ngIf="otherApprovedDevice == true">
                                                If you have selected "Other Sydney Water approved pre-treatment
                                                device",
                                                Sydney Water will need to review the suitability of this device for
                                                your
                                                business prior to installation.
                                            </li>
                                        </ul>
                                    </div>

                                    <p>Find out more about
                                        <a href="https://www.sydneywater.com.au/your-business/meeting-your-responsibilities/backflow-prevention.html"
                                            target="_blank">backflow prevention requirements</a>.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Wholesale: Pre-treatment equipment details -->
                        <div class="row form-row pretreatment-equipment" [ngClass]="{
                                'row-has-error':     ( dtwFormControls.pretreatmentEquipment.errors  &&  dtwFormSubmitted )
                            }"
                            *ngIf="dtwFormControls.wholesaleBusiness.value == 'yes' && dtwFormControls.industrialBusiness.value == 'no' ">
                            <div class="col-sm-10 col-sm-offset-1">

                                <h2 class="highlight-on-error">
                                    <span class="question-number counter"></span>
                                    Pre-treatment equipment details
                                </h2>

                                <dtw-application-wholesale-pretreatment-equipment-list>
                                </dtw-application-wholesale-pretreatment-equipment-list>

                                <div class="row">
                                    <div class="form-group col-sm-12 error-help-text-only" [ngClass]="{
                                            'has-error':   ( dtwFormControls.pretreatmentEquipment.errors  &&  dtwFormSubmitted ),
                                            'has-success':  !dtwFormControls.pretreatmentEquipment.errors  &&  dtwFormControls.pretreatmentEquipment.touched
                                        }">
                                        <!-- <label>Pre-treatment equipment details</label> -->
                                        <input type="text" formControlName="pretreatmentEquipment" class="invisible">
                                        <div class="row">
                                            <div class="col-sm-12 error help-text required" *ngIf="
                                                        (dtwFormControls.pretreatmentEquipment.errors?.inFloorBucketTrap  &&  dtwFormSubmitted )
                                                    ">
                                                Please add at least one in-floor bucket trap
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-12 error help-text required" *ngIf="
                                                        ( dtwFormControls.pretreatmentEquipment.errors?.inSinkBucketTrap  &&  dtwFormSubmitted )
                                                    ">
                                                Please add at least one in-sink bucket trap
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-12 error help-text required" *ngIf="
                                                        ( dtwFormControls.pretreatmentEquipment.errors?.greaseTrapOrCentralisedPreTreatment  &&  dtwFormSubmitted )
                                                    ">
                                                Please add either at least one grease trap or centralised
                                                pre-treatment
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Industrial: Business activities -->
                        <div class="row form-row industrial-business-activities" [ngClass]="{
                                'row-has-error':      dtwFormControls.industrialBusinessActivities.errors  &&  dtwFormSubmitted ||
                                                      dtwFormControls.otherIndustrialBusinessActivity.errors?.pattern ||
                                                    ( dtwFormControls.otherIndustrialBusinessActivity.errors  &&  dtwFormControls.otherIndustrialBusinessActivity.touched ) ||
                                                    ( dtwFormControls.otherIndustrialBusinessActivity.errors  &&  dtwFormSubmitted )
                            }"
                            *ngIf="dtwFormControls.industrialBusiness && dtwFormControls.industrialBusiness.value == 'yes' ">
                            <div class="col-sm-10 col-sm-offset-1">

                                <h2 class="highlight-on-error">
                                    <span class="question-number counter"></span>
                                    Business activities
                                </h2>
                                <div class="checkboxList bordered" [ngClass]="{
                                        'has-error-required':   ( dtwFormControls.industrialBusinessActivities.errors?.required  &&  dtwFormSubmitted ),
                                        'has-success':           !dtwFormControls.industrialBusinessActivities.errors  &&  dtwFormControls.industrialBusinessActivities.touched
                                    }">
                                    <div class="row">
                                        <div class="col-sm-12 error-help-text-only">

                                            <div class="row"
                                                *ngFor="let industrialBusinessActivityName of industrialBusinessActivityNames">
                                                <div class="col-sm-6">
                                                    <div class="checkbox">
                                                        <input type="checkbox"
                                                            class="checkboxButton button form-control"
                                                            id="{{industrialBusinessActivityName.label}}"
                                                            formArrayName="industrialBusinessActivities"
                                                            (change)="onIndustrialBusinessActivityChange(industrialBusinessActivityName.label, $event.target.checked)"
                                                            value={{industrialBusinessActivityName.label}}
                                                            [checked]="checkedIndustrialActivities && checkedIndustrialActivities.includes(industrialBusinessActivityName.label)">
                                                        <label for="{{industrialBusinessActivityName.label}}"
                                                            class="btn btn-list full-min-width">
                                                            <span class="customCheckbox">
                                                                <i class="fa fa-check"></i>
                                                            </span>
                                                            {{industrialBusinessActivityName.label}}
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="checkboxList bordered business-activity-other" [ngClass]="{
                                        'has-error-required': ( dtwFormControls.industrialBusinessActivities.errors?.required  &&  dtwFormSubmitted ),
                                        'has-error':            dtwFormControls.otherIndustrialBusinessActivity.errors?.pattern ||
                                                              ( dtwFormControls.otherIndustrialBusinessActivity.errors  &&  dtwFormControls.otherIndustrialBusinessActivity.touched ) ||
                                                              ( dtwFormControls.otherIndustrialBusinessActivity.errors  &&  dtwFormSubmitted )
                                    }">
                                    <div class="row">

                                        <div class=" col-sm-6">
                                            <div class="checkbox">
                                                <input type="checkbox" class="checkboxButton button form-control"
                                                    id="Other" formArrayName="industrialBusinessActivities"
                                                    (change)="onIndustrialBusinessActivityChange('Other', $event.target.checked)"
                                                    value="Other"
                                                    [checked]="checkedIndustrialActivities && checkedIndustrialActivities.includes('Other')">
                                                <label for="Other" class="btn btn-list full-min-width">
                                                    <span class="customCheckbox"> <i class="fa fa-check"></i>
                                                    </span>Other<br>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-sm-6" *ngIf="otherIndustrialBusinessActivityChecked == true">
                                            <input type="text" formControlName="otherIndustrialBusinessActivity"
                                                [pattern]="textFieldRegex" maxlength="50" class="form-control"
                                                [placeholder]="'Please specify business activity'" />
                                        </div>

                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6 error help-text required col-sm-offset-6"
                                            *ngIf="( dtwFormControls.otherIndustrialBusinessActivity.errors?.required  &&  dtwFormControls.otherIndustrialBusinessActivity.touched ) ||
                                                   ( dtwFormControls.otherIndustrialBusinessActivity.errors?.required  &&  dtwFormSubmitted ) ">
                                            Please enter business activity
                                        </div>
                                        <div class="col-sm-6 error help-text required col-sm-offset-6"
                                            *ngIf="( dtwFormControls.otherIndustrialBusinessActivity.errors?.pattern )">
                                            Only use letters, numbers, spaces and &nbsp; - &nbsp; . &nbsp; , &nbsp;
                                            &
                                            &nbsp;
                                            '
                                        </div>
                                    </div>
                                </div>
                                <div class="row required-row" [ngClass]="{
                                        'has-error':   ( dtwFormControls.industrialBusinessActivities.errors  &&  dtwFormSubmitted ),
                                        'has-success':  !dtwFormControls.industrialBusinessActivities.errors  &&  dtwFormControls.industrialBusinessActivities.dirty
                                    }">
                                    <div class="col-sm-12 error help-text required"
                                        *ngIf="( dtwFormControls.industrialBusinessActivities.errors?.required  &&  dtwFormControls.industrialBusinessActivities.dirty ) ||
                                               ( dtwFormControls.industrialBusinessActivities.errors?.required  &&  dtwFormSubmitted  ) ">
                                        Select at least one business activity
                                    </div>
                                </div>
                                <div class="row"
                                    *ngIf="checkedIndustrialActivities.includes('Contaminated ground water/surface water')">
                                    <div class="col-xs-12">
                                        <div class="card-help">
                                            <div class="card-help-body">
                                                You will be required to provide evidence that the contamination is
                                                due
                                                to manmade activity and you have investigated alternative disposal
                                                methods but those options are not feasible.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <!-- Commercial: Business activities -->
                        <div class="row form-row commercial-business-activities" [ngClass]="{
                                'row-has-error':     ( dtwFormControls.commercialBusinessActivities.errors  &&  dtwFormSubmitted )
                            }"
                            *ngIf="dtwFormControls.wholesaleBusiness.value == 'no' && dtwFormControls.industrialBusiness.value == 'no' ">
                            <div class="col-sm-10 col-sm-offset-1">

                                <h2 class="highlight-on-error">
                                    <span class="question-number counter"></span>
                                    Business activities
                                </h2>

                                <dtw-application-commercial-business-activities-list>
                                </dtw-application-commercial-business-activities-list>

                                <div class="row">
                                    <div class="form-group col-sm-12 error-help-text-only" [ngClass]="{
                                            'has-error':   ( dtwFormControls.commercialBusinessActivities.errors  &&  dtwFormSubmitted ),
                                            'has-success':  !dtwFormControls.commercialBusinessActivities.errors  &&  dtwFormControls.commercialBusinessActivities.touched
                                        }">
                                        <!-- <label>Business activities</label> -->
                                        <input type="text" formControlName="commercialBusinessActivities"
                                            class="invisible">
                                        <div class="row">
                                            <div class="col-sm-12 error help-text required" *ngIf="
                                                    (dtwFormControls.commercialBusinessActivities.errors?.required &&  dtwFormSubmitted )
                                                ">
                                                Please add at least one business activity
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Commercial: Summary of application requirements -->
                        <div class="row form-row application-requirements-summary"
                            *ngIf="dtwFormControls.wholesaleBusiness.value == 'no' && dtwFormControls.industrialBusiness.value == 'no' && commercialBusinessActivitiesList.length > 0 ">
                            <div class="col-sm-10 col-sm-offset-1">
                                <div class="info-alert">
                                    <div class="header">Summary of application requirements</div>

                                    <div class="alert-section">
                                        <div class="alert-section-header">What you need to provide</div>
                                        <div>
                                            Details of the following equipment based on the business activities
                                            added:
                                            <div class="min-requirement table-list">
                                                <ol class="table-list-header hide-768">
                                                    <li>
                                                        <div class="row table-list-header-row">
                                                            <div class="col-sm-5">Equipment type</div>
                                                            <div class="col-sm-7">Minimum required volume/size</div>
                                                        </div>
                                                    </li>
                                                </ol>
                                                <ng-container *ngFor="let equipment of minEquipment; let i = index">
                                                    <ol class="table-list-body hide-768"
                                                        *ngIf="equipment.name != 'Centralised pre-treatment'">
                                                        <li>
                                                            <div class="row not-cpt">
                                                                <div class="col-sm-5 equipmentName">
                                                                    {{equipment.name}}
                                                                </div>
                                                                <div class="col-sm-7 volume">
                                                                    <span class="not-dash"
                                                                        *ngIf="equipment.volume != null && equipment.volume > 0">
                                                                        {{equipment.volume | number}}
                                                                        {{equipment.measurementUnit}}
                                                                    </span>
                                                                    <span class="dash"
                                                                        *ngIf="!(equipment.volume != null && equipment.volume > 0)">
                                                                        -
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </li>
                                                    </ol>
                                                    <ol class="table-list-body hide-768"
                                                        *ngIf="equipment.name == 'Centralised pre-treatment' && equipment.volume > 30000">
                                                        <li>
                                                            <div class="row cpt">
                                                                <div class="col-sm-5 equipmentName">
                                                                    {{equipment.name}}
                                                                </div>
                                                                <div class="col-sm-7 volume">-</div>
                                                            </div>
                                                        </li>
                                                    </ol>
                                                    <div class="table-list-lab-val show-768">
                                                        <div class="row not-cpt"
                                                            *ngIf="equipment.name != 'Centralised pre-treatment'">
                                                            <div class="col-xs-6 lab equipmentType">Equipment type
                                                            </div>
                                                            <div class="col-xs-6 val equipmentName">
                                                                {{equipment.name}}
                                                            </div>
                                                            <div class="col-xs-6 lab equipmentVolSize">
                                                                Minimum required volume/size
                                                            </div>
                                                            <div class="col-xs-6 val volume">
                                                                <span class="not-dash"
                                                                    *ngIf="equipment.volume != null && equipment.volume > 0">
                                                                    {{equipment.volume | number}}
                                                                    {{equipment.measurementUnit}}
                                                                </span>
                                                                <span class="dash"
                                                                    *ngIf="!(equipment.volume != null && equipment.volume > 0)">
                                                                    -
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="row"
                                                            *ngIf="equipment.name == 'Centralised pre-treatment' && equipment.volume > 30000">
                                                            <div class="col-xs-6 lab equipmentType">Equipment type
                                                            </div>
                                                            <div class="col-xs-6 val equipmentName">
                                                                {{equipment.name}}
                                                            </div>
                                                            <div class="col-xs-6 lab equipmentVolSize">
                                                                Minimum required volume/size
                                                            </div>
                                                            <div class="col-xs-6 val volume dash">-</div>
                                                        </div>
                                                    </div>
                                                </ng-container>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="alert-section other-requirements">
                                        <div class="alert-section-header">
                                            Other requirements before your application can be approved
                                        </div>
                                        <ol>
                                            <li *ngIf="minRequirements.hydraulicConsultantRequired"
                                                class="hydraulicConsultantRequired">
                                                A letter from hydraulic consultant specifying pre-treatment
                                                requirements.
                                            </li>
                                            <li *ngIf="minRequirements.greaseRemovalDeviceRequired"
                                                class="greaseRemovalDeviceRequired">
                                                You need to have grease removal device for use of upstream of an
                                                appropriately sized grease arrestor only.
                                            </li>
                                            <li *ngIf="minRequirements.roofAndBundRequired" class="roofAndBundRequired">
                                                Roof with 10 degree overhang and bund wash area to exclude
                                                rainwater.
                                            </li>
                                            <li *ngIf="minRequirements.commercialLaundryRequirements"
                                                class="commercialLaundryRequirements">
                                                Provide details of all washing machine(s) with inbuilt lint screen.
                                            </li>
                                            <li *ngIf="minRequirements.equipmentWashingRequirements"
                                                class="equipmentWashingRequirements">
                                                Roof and bund wash area to exclude rainwater.
                                            </li>
                                            <li *ngIf="minRequirements.portableToiletsDepotRequirements"
                                                class="portableToiletsDepotRequirements">
                                                Hardwired electromagnetic discharge flowmeter.
                                            </li>
                                            <li *ngIf="minRequirements.laboratoryPathologyRequirements"
                                                class="laboratoryPathologyRequirements">
                                                All fume cupboards must not connect to the sewer and discharge into
                                                a
                                                blind pit.
                                            </li>
                                            <ng-container *ngIf="minRequirements.publicPoolsRequirements">
                                                <li class="publicPoolsRequirements">
                                                    The collection pit must be sized to capture the largest backwash
                                                    cycle of the pool plus 15%.
                                                </li>
                                                <li>
                                                    Specify the filter size and backwash volume.
                                                </li>
                                                <li>
                                                    Pumped discharge &lt;2litres/sec.
                                                </li>
                                            </ng-container>
                                            <ng-container *ngIf="minRequirements.panelBeaterSprayPainterRequirements">
                                                <li class="panelBeaterSprayPainterRequirements">
                                                    Contaminated water from the spray booth water must be pumped out
                                                    and
                                                    taken off-site. This water must not go to the sewer.
                                                </li>
                                                <li>
                                                    Do not discharge this water directly or indirectly to the sewer
                                                    or
                                                    stormwater.
                                                </li>
                                                <li>
                                                    Store paints and thinners in a suitable flammable liquids
                                                    storage
                                                    container within a bunded area.
                                                </li>
                                            </ng-container>
                                            <ng-container *ngIf="minRequirements.petrolStationForecourtRequirements">
                                                <li class="petrolStationForecourtRequirements">
                                                    Inspection opening on grill cove.
                                                </li>
                                                <li>
                                                    A level indicator in the collection well.
                                                </li>
                                                <li>
                                                    High level alarm in the collection well.
                                                </li>
                                                <li>
                                                    Manual check of collection well before using keyed manual start
                                                    switch.
                                                </li>
                                                <li>
                                                    Keyed manual start switch located close to and pump.
                                                </li>
                                                <li>
                                                    Forecourt to roofed with 10 degree overhang of the bunded area.
                                                </li>
                                                <li>
                                                    Roof and bund wash area to exclude rainwater.
                                                </li>
                                            </ng-container>
                                            <ng-container *ngIf="minRequirements.microCraftBrewingRequirements">
                                                <li class="microCraftBrewingRequirements">
                                                    Hardwired continuous pH correction.
                                                </li>
                                                <li>
                                                    Hardwired electromagnetic discharge flowmeter.
                                                </li>
                                            </ng-container>
                                            <li>
                                                You must engage a backflow-accredited licensed plumber to install
                                                and
                                                test the backflow containment devices at the property boundary next
                                                to
                                                any water meters servicing your property.
                                            </li>
                                            <li>
                                                You must install a tap within 5 metres of any pre-treatment (e.g.
                                                grease
                                                trap), and a backflow prevention device on the inlet side of the
                                                tap.
                                            </li>
                                            <li *ngIf="otherApprovedDevice == true">
                                                If you have selected "Other Sydney Water approved pre-treatment
                                                device",
                                                Sydney Water will need to review the suitability of this device for
                                                your
                                                business prior to installation.
                                            </li>
                                        </ol>
                                    </div>

                                    <p>Find out more about
                                        <a href="https://www.sydneywater.com.au/your-business/meeting-your-responsibilities/backflow-prevention.html"
                                            target="_blank">backflow prevention requirements</a>.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!--Commercial Pre-treatment equipment details -->
                        <div class="row form-row pretreatment-equipment" [ngClass]="{
                                'row-has-error':     ( dtwFormControls.commercialPretreatmentEquipment.errors  &&  dtwFormSubmitted )
                            }"
                            *ngIf="isCommercial() && commercialBusinessActivitiesList.length > 0 && minEquipment.length > 0">
                            <div class="col-sm-10 col-sm-offset-1">

                                <h2 class="highlight-on-error">
                                    <span class="question-number counter"></span>
                                    Pre-treatment equipment details
                                </h2>

                                <dtw-application-commercial-pretreatment-equipment-list>
                                </dtw-application-commercial-pretreatment-equipment-list>

                                <div class="row">
                                    <div class="form-group col-sm-12 error-help-text-only" [ngClass]="{
                                            'has-error':   ( dtwFormControls.commercialPretreatmentEquipment.errors  &&  dtwFormSubmitted ),
                                            'has-success':  !dtwFormControls.commercialPretreatmentEquipment.errors  &&  dtwFormControls.commercialPretreatmentEquipment.touched
                                        }">
                                        <!-- <label>Pre-treatment equipment details</label> -->
                                        <input type="text" formControlName="commercialPretreatmentEquipment"
                                            class="invisible">
                                        <div class="row"
                                            *ngFor="let error of dtwFormControls.commercialPretreatmentEquipment.errors | keyvalue ">
                                            <div class="col-sm-12 error help-text required"
                                                *ngIf="dtwFormSubmitted && error.value == 'Missing'">
                                                Please add at least one {{error.key | lowercase}}
                                            </div>
                                            <div class="col-sm-12 error help-text required"
                                                *ngIf="dtwFormSubmitted && error.value == 'NotSatisfied'">
                                                The volume you have provided for {{error.key | lowercase}} is below
                                                the
                                                minimum requirement. Please increase the volume.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Industrial: Wastewater discharge -->
                        <div class="row form-row" [ngClass]="{
                            'row-has-error':   
                                  dtwFormControls.wasterwaterDischargePerDay.errors?.pattern ||
                                ( dtwFormControls.wasterwaterDischargePerDay.errors  &&  dtwFormSubmitted ) ||
                                ( dtwFormControls.wasterwaterDischargePerDay.errors  &&  dtwFormControls.wasterwaterDischargePerDay.touched ) ||

                                  dtwFormControls.howWastewaterGenerated.errors?.pattern ||
                                ( dtwFormControls.howWastewaterGenerated.errors  &&  dtwFormSubmitted ) ||
                                ( dtwFormControls.howWastewaterGenerated.errors  &&  dtwFormControls.howWastewaterGenerated.touched )
                            }" *ngIf="dtwFormControls.industrialBusiness.value == 'yes' ">
                            <div class="col-sm-10 col-sm-offset-1">
                                <h2 class="highlight-on-error">
                                    <span class="question-number counter"></span> Wastewater discharge
                                </h2>

                                <!-- Anticipated maximum wastewater discharge amount per day -->
                                <div class="row">
                                    <div class="label-only col-sm-12" [ngClass]="{
                                        'has-error':     dtwFormControls.wasterwaterDischargePerDay.errors?.pattern ||
                                                       ( dtwFormControls.wasterwaterDischargePerDay.errors  &&  dtwFormSubmitted ) ||
                                                       ( dtwFormControls.wasterwaterDischargePerDay.errors  &&  dtwFormControls.wasterwaterDischargePerDay.touched ) ,
                                        'has-success':  !dtwFormControls.wasterwaterDischargePerDay.errors  &&  dtwFormControls.wasterwaterDischargePerDay.touched
                                       }">
                                        <label>Anticipated maximum wastewater discharge amount per day</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="form-group col-xs-6 isTextInput no-label" [ngClass]="{
                                        'has-error':     dtwFormControls.wasterwaterDischargePerDay.errors?.pattern ||
                                                       ( dtwFormControls.wasterwaterDischargePerDay.errors  &&  dtwFormSubmitted ) ||
                                                       ( dtwFormControls.wasterwaterDischargePerDay.errors  &&  dtwFormControls.wasterwaterDischargePerDay.touched ) ,
                                        'has-success':  !dtwFormControls.wasterwaterDischargePerDay.errors  &&  dtwFormControls.wasterwaterDischargePerDay.touched
                                       }">
                                        <!-- <label>Anticipated maximum wastewater discharge amount per day</label> -->
                                        <input type="text" formControlName="wasterwaterDischargePerDay"
                                            class="form-control" [pattern]="nationalNumberRegex" maxLength="5" />
                                    </div>
                                    <div class="col-xs-6 kilo-text">
                                        Kilolitres (KL)
                                    </div>
                                    <div class="col-sm-12 error help-text required"
                                        *ngIf="( dtwFormControls.wasterwaterDischargePerDay.errors?.required  &&  dtwFormControls.wasterwaterDischargePerDay.touched ) ||
                                               ( dtwFormControls.wasterwaterDischargePerDay.errors?.required  &&  dtwFormSubmitted ) ">
                                        Please enter wastewater discharge per day
                                    </div>
                                    <div class="col-sm-12 error help-text pattern"
                                        *ngIf="( dtwFormControls.wasterwaterDischargePerDay.errors?.pattern )">
                                        Enter number up to 5 digits, no other characters
                                    </div>
                                </div>

                                <!-- How is wastewater being generated -->
                                <div class="row">
                                    <div class="form-group col-sm-12 isTextarea" [ngClass]="{
                                        'has-error':      dtwFormControls.howWastewaterGenerated.errors?.pattern ||
                                                        ( dtwFormControls.howWastewaterGenerated.errors  &&  dtwFormSubmitted ) ||
                                                        ( dtwFormControls.howWastewaterGenerated.errors  &&  dtwFormControls.howWastewaterGenerated.touched ) ,
                                        'has-success':   !dtwFormControls.howWastewaterGenerated.errors  &&  dtwFormControls.howWastewaterGenerated.touched
                                        }">
                                        <label>How is wastewater being generated?</label>
                                        <textarea type="text" formControlName="howWastewaterGenerated"
                                            class="form-control howWastewaterGenerated" [pattern]="textAreaRegex"
                                            maxLength="2500"
                                            [placeholder]="'e.g. how do you process wastewater and check the pollution levels'"></textarea>
                                    </div>
                                    <div class="col-sm-12 error help-text textarea required"
                                        *ngIf="( dtwFormControls.howWastewaterGenerated.errors?.required  &&  dtwFormControls.howWastewaterGenerated.touched ) ||
                                               ( dtwFormControls.howWastewaterGenerated.errors?.required  &&  dtwFormSubmitted ) ">
                                        Please specify how wastewater is generated
                                    </div>
                                    <div class="col-sm-12 error help-text textarea pattern"
                                        *ngIf="( dtwFormControls.howWastewaterGenerated.errors?.pattern )">
                                        Only use letters, numbers, spaces and &nbsp; ! &nbsp; @ &nbsp; # &nbsp; $
                                        &nbsp;
                                        % &nbsp; & &nbsp; * &nbsp; ( &nbsp; ) &nbsp; _ &nbsp; - &nbsp; + &nbsp;'
                                        &nbsp;
                                        " &nbsp; , &nbsp; . &nbsp; / &nbsp; ? &nbsp;
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Wastesafe transporter -->
                        <div class="row form-row" [ngClass]="{
                            'row-has-error':      (dtwFormControls.isWastesafeTransporterArranged.errors  &&  dtwFormSubmitted) ||
                                                  (dtwFormControls.wastesafeTransporter.errors  &&  dtwFormControls.wastesafeTransporter.touched) ||
                                                  (dtwFormControls.wastesafeTransporter.errors  &&  dtwFormSubmitted )
                            }" *ngIf="isWastesafeTransporterRequired()">
                            <div class="col-sm-10 col-sm-offset-1">

                                <h2 class="highlight-on-error">
                                    <span class="question-number counter"></span>
                                    Wastesafe transporter
                                </h2>
                                <div class="card-help">
                                    <div class="card-help-body">
                                        You have to pump-out your grease trap regularly. Contact one of our
                                        <a class="btn btn-link" target="_blank"
                                            href="https://www.sydneywater.com.au/your-business/managing-trade-wastewater/commercial-trade-wastewater/wastesafe-transporters.html">
                                            accredited Wastesafe transporters</a>for this service.
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="isWastesafeTransporter-form-group form-group isPushButtons isYesNo col-sm-12"
                                        [ngClass]="{
                                                'has-error':    ( dtwFormControls.isWastesafeTransporterArranged.errors  &&  dtwFormSubmitted ) ,
                                                'has-success':   !dtwFormControls.isWastesafeTransporterArranged.errors
                                                }">
                                        <label>
                                            Have you arranged for a Wastesafe transporter to pump out the grease
                                            trap?
                                        </label>
                                        <div class="btn-group btn-group-toggle push-buttons" ngbRadioGroup
                                            name="radioBasic" formControlName="isWastesafeTransporterArranged">
                                            <label class="btn btn-default push-button yes" ngbButtonLabel>
                                                <input ngbButton type="radio" [value]="'yes'"> Yes
                                            </label> <label class="btn btn-default push-button no" ngbButtonLabel>
                                                <input ngbButton type="radio" [value]="'no'"> Not yet
                                            </label>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-12 error help-text required push-buttons"
                                                *ngIf="( dtwFormControls.isWastesafeTransporterArranged.errors  &&  dtwFormSubmitted )">
                                                Please indicate yes or not yet
                                            </div>
                                        </div>
                                    </div>

                                </div>

                                <!-- Wastesafe Transporter list -->
                                <div class="row">
                                    <div class="wastesafeTransporter-group form-group isSelect col-sm-6" [ngClass]="{
                                        'has-error':    ( dtwFormControls.wastesafeTransporter.errors  &&  dtwFormControls.wastesafeTransporter.touched ) ||
                                                        ( dtwFormControls.wastesafeTransporter.errors  &&  dtwFormSubmitted ) , 
                                        'has-success':   !dtwFormControls.wastesafeTransporter.errors
                                    }">
                                        <label>Wastesafe transporter name</label>
                                        <input id="typeahead-focus" type="text" class="form-control"
                                            formControlName="wastesafeTransporter"
                                            [ngbTypeahead]="wastesafeTransporterSearch"
                                            [inputFormatter]="wastesafeTransporterFormatter"
                                            [resultFormatter]="wastesafeTransporterFormatter"
                                            (focus)="wastesafeTransporterFocus$.next($any($event).target.value)"
                                            #wastesafeTransporterInstance="ngbTypeahead" [editable]="false"
                                            [placeholder]="'- please select transporter -'" />
                                        <div class="row">
                                            <div class="col-sm-12 error help-text required"
                                                *ngIf="
                                                ( dtwFormControls.wastesafeTransporter.errors  &&  dtwFormControls.wastesafeTransporter.touched ) ||
                                                ( dtwFormControls.wastesafeTransporter.errors  &&  dtwFormSubmitted ) ">
                                                Please select a transporter from the list
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <!-- Wastewater discharge start date -->
                        <div class="row form-row" [ngClass]="{
                                'row-has-error':      dtwFormControls.dischargeStartDate.errors?.pattern ||
                                                    ( dtwFormControls.dischargeStartDate.errors  &&  dtwFormSubmitted ) ||
                                                    ( dtwFormControls.dischargeStartDate.errors  &&  dtwFormControls.dischargeStartDate.touched )
                            }"
                            *ngIf="dtwFormControls.wholesaleBusiness.value == 'yes' || dtwFormControls.industrialBusiness.value == 'yes'  ">
                            <div class="col-sm-10 col-sm-offset-1">
                                <h2 class="highlight-on-error">
                                    <span class="question-number counter"></span>Wastewater discharge start date
                                </h2>

                                <div class="row">
                                    <div class="form-group col-sm-12 label-only" [ngClass]="{
                                        'has-error':   ( dtwFormControls.dischargeStartDate.errors  &&  dtwFormControls.dischargeStartDate.touched ) ||
                                                       ( dtwFormControls.dischargeStartDate.errors  &&  dtwFormSubmitted ) , 
                                        'has-success':  !dtwFormControls.dischargeStartDate.errors  &&  dtwFormControls.dischargeStartDate.touched
                                    }">
                                        <label>
                                            Specify when you started, or plan to start, discharging wastewater.
                                        </label>
                                    </div>
                                    <div class="form-group col-sm-6 isDatepicker" [ngClass]="{
                                        'has-error':   ( dtwFormControls.dischargeStartDate.errors  &&  dtwFormControls.dischargeStartDate.touched ) ||
                                                       ( dtwFormControls.dischargeStartDate.errors  &&  dtwFormSubmitted ) , 
                                        'has-success':  !dtwFormControls.dischargeStartDate.errors  &&  dtwFormControls.dischargeStartDate.touched
                                    }">
                                        <i class="fa fa-calendar"></i>
                                        <input type="text" formControlName="dischargeStartDate"
                                            class="form-control data-datepicker" ngbDatepicker #d="ngbDatepicker"
                                            (click)="d.toggle()" [readonly]="true" placeholder="dd/mm/yyyy"
                                            [minDate]="minDischargeStartDate" />
                                    </div>
                                    <div class="col-sm-12 error help-text" *ngIf="( 
                                              dtwFormControls.dischargeStartDate.errors  &&  dtwFormControls.dischargeStartDate.touched ) ||
                                            ( dtwFormControls.dischargeStartDate.errors  &&  dtwFormSubmitted ) ">
                                        Start date is required
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Additional location details -->
                        <div class="row form-row" [ngClass]="{
                                'row-has-error':      dtwFormControls.shopNumber.errors?.pattern ||
                                                    ( dtwFormControls.shopNumber.errors  &&  dtwFormSubmitted ) ||
                                                    ( dtwFormControls.shopNumber.errors  &&  dtwFormControls.shopNumber.touched ) ||
    
                                                      dtwFormControls.lotNumber.errors?.pattern ||
                                                    ( dtwFormControls.lotNumber.errors  &&  dtwFormSubmitted ) ||
                                                    ( dtwFormControls.lotNumber.errors  &&  dtwFormControls.lotNumber.touched )
                            }"
                            *ngIf="dtwFormControls.wholesaleBusiness.value == 'yes' || dtwFormControls.industrialBusiness.value == 'yes'  ">
                            <div class="col-sm-10 col-sm-offset-1">
                                <h2 class="highlight-on-error"><span class="question-number counter"></span>
                                    Additional location details (optional)
                                </h2>
                                <div class="row">
                                    <div class="form-group col-sm-6" [ngClass]="{
                                            'has-error':     dtwFormControls.shopNumber.errors?.pattern ||
                                                           ( dtwFormControls.shopNumber.errors  &&  dtwFormSubmitted ) ||
                                                           ( dtwFormControls.shopNumber.errors  &&  dtwFormControls.shopNumber.touched ) ,
                                            'has-success':  !dtwFormControls.shopNumber.errors  &&  dtwFormControls.shopNumber.touched
                                           }">
                                        <label>Shop or unit number</label>
                                        <input type="text" formControlName="shopNumber" class="form-control"
                                            [pattern]="textFieldRegex" maxlength="255" />
                                        <div class="row">
                                            <div class="col-sm-12 error help-text pattern"
                                                *ngIf="( dtwFormControls.shopNumber.errors?.pattern )">
                                                Only use letters, numbers, spaces and &nbsp; - &nbsp; . &nbsp; ,
                                                &nbsp;
                                                & &nbsp; '
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-6" [ngClass]="{
                                            'has-error':     dtwFormControls.lotNumber.errors?.pattern ||
                                                           ( dtwFormControls.lotNumber.errors  &&  dtwFormSubmitted ) ||
                                                           ( dtwFormControls.lotNumber.errors  &&  dtwFormControls.lotNumber.touched ) ,
                                            'has-success':  !dtwFormControls.lotNumber.errors  &&  dtwFormControls.lotNumber.touched
                                           }">
                                        <label>Lot number</label>
                                        <input type="text" formControlName="lotNumber" class="form-control"
                                            [pattern]="textFieldRegex" maxlength="9" />
                                        <div class="row">
                                            <div class="col-sm-12 error help-text pattern"
                                                *ngIf="( dtwFormControls.lotNumber.errors?.pattern )">
                                                Only use letters, numbers, spaces and &nbsp; - &nbsp; . &nbsp; ,
                                                &nbsp;
                                                & &nbsp; '
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Document attachments -->
                        <div class="row form-row document-attachments" [ngClass]="{
                                'row-has-error':    ( dtwFormControls.attachmentsHydraulicLetters.errors  &&  dtwFormSubmitted ) ||
                                                    ( dtwFormControls.attachmentsHydraulicDrawings.errors &&  dtwFormSubmitted )
                            }"
                            *ngIf="(
                                  dtwFormControls.wholesaleBusiness.value == 'yes' && dtwFormControls.industrialBusiness.value == 'no' ) ||
                                ( dtwFormControls.wholesaleBusiness.value == 'no'  && dtwFormControls.industrialBusiness.value == 'no' && commercialBusinessActivitiesList.length > 0 )">
                            <div class="col-sm-10 col-sm-offset-1">

                                <h2 class="highlight-on-error">
                                    <span class="question-number counter"></span>
                                    Document attachments
                                </h2>

                                <!-- help hint -->
                                <div class="card-help">
                                    <div class="card-help-body">
                                        You need to attach the letter from hydraulic consultant only if the size of
                                        the
                                        grease traps doesn't meet minimum requirements.
                                        <a class="btn btn-link" href="assets/docs/hydraulicConsultantTemplate.docx"
                                            target="_blank">
                                            See example of the letter
                                        </a>
                                    </div>
                                </div>

                                <div class="card-help">
                                    <div class="card-help-body">
                                        All documents to be attached must be certified/council approved. Each
                                        attached
                                        file must be less than <span class="bold">10MB</span> in size.
                                        Allowable file types are:
                                        <span class="bold">Microsoft Word, DWG, PDF, PNG, JPG, ZIP, XLS</span> and
                                        <span class="bold">XLSX</span>.
                                    </div>
                                </div>

                                <input type="text" formControlName="attachmentsHydraulicLetters" class="invisible">
                                <application-attachments [attachmentConfig]="attachmentConfigHydraulicLetter"
                                    (attachmentsFormData)="onAttachmentsHydraulicLetterChanged($event)"
                                    [attachmentsRequiredShow]="hydraulicLetterAttachmentsRequiredShow"
                                    [existingData]="documentAttachmentsExisting.hydraulicLetter" [ngClass]="{
                                        'has-error':  hydraulicLetterAttachmentsRequiredShow
                                    }">
                                </application-attachments>
                                <ng-container *ngIf="
                                        dtwFormControls.wholesaleBusiness.value == 'yes' ||
                                        dtwFormControls.wholesaleBusiness.value == 'no' && dtwFormControls.industrialBusiness.value == 'no'
                                    ">
                                    <input type="text" formControlName="attachmentsHydraulicDrawings" class="invisible">
                                    <application-attachments [attachmentConfig]="attachmentConfigHydraulicDrawings"
                                        (attachmentsFormData)="onAttachmentsHydraulicDrawingsChanged($event)"
                                        [attachmentsRequiredShow]="hydraulicDrawingsAttachmentsRequiredShow"
                                        [existingData]="documentAttachmentsExisting.hydraulicDrawings" [ngClass]="{
                                            'has-error':  hydraulicDrawingsAttachmentsRequiredShow
                                        }">
                                    </application-attachments>
                                </ng-container>
                            </div>
                        </div>

                        <!-- Industrial: Sydney Water contact -->
                        <div class="row form-row" [ngClass]="{
                                'row-has-error':      dtwFormControls.sydneyWaterContact.errors?.pattern ||
                                                    ( dtwFormControls.sydneyWaterContact.errors  &&  dtwFormSubmitted ) ||
                                                    ( dtwFormControls.sydneyWaterContact.errors  &&  dtwFormControls.sydneyWaterContact.touched )
                            }"
                            *ngIf="dtwFormControls.industrialBusiness && dtwFormControls.industrialBusiness.value == 'yes' ">
                            <div class="col-sm-10 col-sm-offset-1">

                                <h2 class="highlight-on-error"><span class="question-number counter"></span>
                                    Sydney Water contact (optional)
                                </h2>

                                <!-- Do you have an existing relationship with Sydney Water team member -->
                                <div class="row">
                                    <div class="form-group col-sm-12" [ngClass]="{
                                            'has-error':     dtwFormControls.sydneyWaterContact.errors?.pattern ||
                                                           ( dtwFormControls.sydneyWaterContact.errors  &&  dtwFormSubmitted ) ||
                                                           ( dtwFormControls.sydneyWaterContact.errors  &&  dtwFormControls.sydneyWaterContact.touched ) ,
                                            'has-success':  !dtwFormControls.sydneyWaterContact.errors  &&  dtwFormControls.sydneyWaterContact.touched
                                        }">
                                        <label>
                                            Please name any Sydney Water team member you already deal with.
                                        </label>
                                        <input type="text" formControlName="sydneyWaterContact" class="form-control"
                                            [pattern]="textFieldRegex" maxlength="255" />
                                    </div>
                                    <div class="col-sm-12 error help-text pattern"
                                        *ngIf="( dtwFormControls.sydneyWaterContact.errors?.pattern )">
                                        Only use letters, numbers, spaces and &nbsp; - &nbsp; . &nbsp; , &nbsp; &
                                        &nbsp;
                                        '
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Additional information -->
                        <div class="row form-row"
                            *ngIf="( dtwFormControls.wholesaleBusiness.value == 'yes' || dtwFormControls.industrialBusiness.value == 'yes') ||
                                   ( dtwFormControls.wholesaleBusiness.value == 'no'  && dtwFormControls.industrialBusiness.value == 'no' && commercialBusinessActivitiesList.length > 0 ) "
                            [ngClass]="{
                                'row-has-error':  dtwFormControls.dtwAdditionalInformation.errors?.pattern ||
                                                ( dtwFormControls.dtwAdditionalInformation.errors  &&  dtwFormSubmitted ) ||
                                                ( dtwFormControls.dtwAdditionalInformation.errors  &&  dtwFormControls.dtwAdditionalInformation.touched )
                                }">

                            <div class="col-sm-10 col-sm-offset-1">

                                <h2 class="highlight-on-error">
                                    <span class="question-number counter"></span>
                                    Additional information (optional)
                                </h2>

                                <!-- help hint -->
                                <div class="card-help total-seating" *ngIf="isCommercial()">
                                    <div class="card-help-body">
                                        <span class="card-help-header">For each of your business activities:</span>
                                        <p>
                                            <span class="bold">Food businesses & function centres </span>
                                            - provide the total seating.
                                        </p>
                                        <p>
                                            <span class="bold">Hotels, hospitals & nursing homes </span>
                                            - provide the total number of beds.
                                        </p>
                                        <p>
                                            <span class="bold">Schools </span> - provide the total number of
                                            students.
                                        </p>
                                    </div>
                                </div>

                                <!-- Additional information -->
                                <div class="row">
                                    <div class="form-group col-sm-12 isTextarea" [ngClass]="{
                                            'has-error':      dtwFormControls.dtwAdditionalInformation.errors?.pattern ||
                                                            ( dtwFormControls.dtwAdditionalInformation.errors  &&  dtwFormSubmitted ) ||
                                                            ( dtwFormControls.dtwAdditionalInformation.errors  &&  dtwFormControls.dtwAdditionalInformation.touched ) ,
                                            'has-success':   !dtwFormControls.dtwAdditionalInformation.errors  &&  dtwFormControls.dtwAdditionalInformation.touched
                                        }">
                                        <label>
                                            Please tell us if there is anything we need to know about this discharge
                                            trade wastewater application.
                                        </label>
                                        <textarea type="text" formControlName="dtwAdditionalInformation"
                                            class="form-control additionalInformation" [pattern]="textAreaRegex"
                                            maxLength="2500">
                                        </textarea>
                                    </div>
                                    <div class="col-sm-12 error help-text textarea pattern"
                                        *ngIf="( dtwFormControls.dtwAdditionalInformation.errors?.pattern )">
                                        Only use letters, numbers, spaces and &nbsp; ! &nbsp; @ &nbsp; # &nbsp; $
                                        &nbsp;
                                        % &nbsp; & &nbsp; * &nbsp; ( &nbsp; ) &nbsp; _ &nbsp; - &nbsp; + &nbsp;'
                                        &nbsp;
                                        " &nbsp; , &nbsp; . &nbsp; / &nbsp; ? &nbsp;
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                    <div class="hidden-sm col-md-1 col-lg-2"></div>
                </div>
                <div class="section-footer section-arrow section-white arrow-grey"></div>
            </div>
        </div>

        <div class="application-footer">
            <div class="container">
                <div class="row">
                    <div class="ctas col-xs-12 col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-2">
                        <div class="row footer-buttons-row">
                            <div class="col-sm-3 col-md-3">
                                <button class="btn btn-secondary full-width back" (click)="formPut('back')"
                                    type="button">
                                    Back
                                </button>
                            </div>
                            <div class="col-sm-4 col-md-3">
                                <button class="btn btn-secondary full-width save" (click)="formPut('save')"
                                    name="saveProgress" type="submit">
                                    Save progress
                                </button>
                            </div>
                            <div class="col-sm-5 col-md-6">
                                <button class="btn btn-success full-width next" name="continue"
                                    (click)="formPut('continue')" type="submit">
                                    Continue
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>

    <div *ngIf="formData">
        <div class="hidden">
            <form ngNoForm action="../processApplication?profile=tapin" #dtwPostToServerForm method="post" novalidate>
                <input type="hidden" name='currentApplication.applicationData["businessName"]'
                    [value]="formData.businessName" />
                <input type="hidden" name='currentApplication.applicationData["businessEmail"]'
                    [value]="formData.businessEmail" />
                <input type="hidden" name='currentApplication.applicationData["businessPhoneNumber"]'
                    [value]="formData.businessPhoneNumber" />

                <input type="hidden" name='currentApplication.applicationData["contactPersonsName"]'
                    [value]="formData.contactPersonsName" />
                <input type="hidden" name='currentApplication.applicationData["contactPersonsEmail"]'
                    [value]="formData.contactPersonsEmail" />
                <input type="hidden" name='currentApplication.applicationData["contactPersonsPhoneNumber"]'
                    [value]="formData.contactPersonsPhoneNumber" />

                <input type="hidden" name='currentApplication.applicationData["wholesaleBusiness"]'
                    [value]="formData.wholesaleBusiness" />
                <input type="hidden" name='currentApplication.applicationData["industrialBusiness"]'
                    [value]="formData.industrialBusiness" />

                <!-- Wholesale business fields -->
                <input type="hidden" name='currentApplication.applicationData["pretreatmentEquipment"]'
                    [value]="formData.pretreatmentEquipment" />

                <input type="hidden" name='currentApplication.applicationData["isWastesafeTransporterArranged"]'
                    [value]="formData.isWastesafeTransporterArranged" />
                <input type="hidden" name='currentApplication.applicationData["wastesafeTransporter"]'
                    [value]="formData.wastesafeTransporter" />

                <!-- Industrial business fields -->
                <input type="hidden" name='currentApplication.applicationData["industrialBusinessActivities"]'
                    [value]="formData.industrialBusinessActivities" />
                <input type="hidden" name='currentApplication.applicationData["otherIndustrialBusinessActivity"]'
                    [value]="formData.otherIndustrialBusinessActivity" />
                <input type="hidden" name='currentApplication.applicationData["wasterwaterDischargePerDay"]'
                    [value]="formData.wasterwaterDischargePerDay" />
                <input type="hidden" name='currentApplication.applicationData["howWastewaterGenerated"]'
                    [value]="formData.howWastewaterGenerated" />

                <!-- Commercial business fields -->
                <input type="hidden" name='currentApplication.applicationData["commercialBusinessActivities"]'
                    [value]="formData.commercialBusinessActivities" />
                <input type="hidden" name='currentApplication.applicationData["commercialPretreatmentEquipment"]'
                    [value]="formData.commercialPretreatmentEquipment" />

                <!-- Commonfields -->
                <input type="hidden" name='currentApplication.applicationData["shopNumber"]'
                    [value]="formData.shopNumber" *ngIf="formData.shopNumber" />
                <input type="hidden" name='currentApplication.applicationData["lotNumber"]' [value]="formData.lotNumber"
                    *ngIf="formData.lotNumber" />

                <input type="hidden" name='currentApplication.applicationData["dischargeStartDate"]'
                    [value]="formData.dischargeStartDate" />

                <input type="hidden" name='currentApplication.applicationData["dtwAdditionalInformation"]'
                    [value]="formData.dtwAdditionalInformation" *ngIf="formData.dtwAdditionalInformation" />

                <input type="hidden" name='currentApplication.applicationData["sydneyWaterContact"]'
                    [value]="formData.sydneyWaterContact" *ngIf="formData.sydneyWaterContact" />

                <input type="submit" name="submit" value="continue" #continueBtn>

            </form>
        </div>
    </div>
</div>