<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Kirtans</title>
</head>

<body>
    <h1 id="title"></h1>
    <ul id="list">
        <li id="l1">Line 1</li>
        <li id="l2">Line 2</li>
        <li id="l3">Line 3</li>
        <li id="l4">Line 4</li>
        <li id="l5">Line 5</li>
    </ul>
</body>

<script>
    // Add event listener on keydown
    document.addEventListener('keydown', (event) => {
        if (event.keyCode == 38) {
            //Up Arrow Pushed
            if (index > 1) {
                prev();
            }
            
        } else if (event.keyCode == 40) {
            //Down Arrow Pushed
            console.log("slides.length", slides.length )  
            if ((index +5) < slides.length ) {
                next();
            }
            
        }
        console.log("index", index);
        console.log("slides addEventListener index", slides[index]);

        list = document.getElementById('list');
    }, false);
</script>

<script>
    let kirtanJson;
    var slides;
    let title;
    let list = "";
    let index;
    async function loadData() {
        const response = await fetch("data.json");
        kirtanJson = await response.json();
        id = getUrlParamsId();
        kirtan = getKirtanById(id);
        title = kirtan.title_english;
        description = kirtan.description_english;
        slides = description.split("\n");
        renderTitle();
        renderSlides();
    }

    function renderTitle() {
        titleElement = document.getElementById('title');
        titleElement.innerHTML = title;
    }

    function getKirtanById(id) {
        kirtan = kirtanJson.data.find(x => x.id == id);
        if (kirtan) {
            return kirtan;
        } else {
            return kirtanJson.data.find(x => x.id == 1);
        }
    }

    function getUrlParamsId() {
        urlSearch = window.location.search;
        if (urlSearch) {
            urlParams = new URLSearchParams(urlSearch);
            id = urlParams.get('id')
        } else {
            id = 1
        }
        return id;
    }

    loadData();
</script>

<script>
    index = 1;
    body = document.getElementById('list');
    l1 = document.getElementById('l1');
    l2 = document.getElementById('l2');
    l3 = document.getElementById('l3');
    l4 = document.getElementById('l4');
    l5 = document.getElementById('l5');

    function renderSlides() {
        l1.innerHTML = slides[index + 0];
        l2.innerHTML = slides[index + 1];
        l3.innerHTML = slides[index + 2];
        l4.innerHTML = slides[index + 3];
        l5.innerHTML = slides[index + 4];
    }

    function prev() {
        body.classList.add("shrink");
        body.classList.remove("grow");
        index = index - 1;
        renderSlides();
    }
    function next() {
        body.classList.add("grow");
        body.classList.remove("shrink");
        index = index + 1;
        renderSlides();
    }
</script>

<style>
    .controls {
        position: absolute;
        bottom: 0;
        right: 0
    }

    .body {
        height: 80vh;
    }

    ul {
        list-style: none;
        padding: 0;
    }

    li {
        padding: 5px 0;
        font-size: 40px;
        width: 100%;
        transition: all .5s ease-in-out;
        text-align: center;
    }

    #title {
        font-size: 60px;
        text-align: center;
    }
</style>

<style>
    .c1 {
        position: absolute;
        top: 200px;
        font-size: 30px;
    }

    .c2 {
        position: absolute;
        top: 300px;
        font-size: 40px;
    }

    .c3 {
        position: absolute;
        top: 400px;
        font-size: 30px;
    }

    .c4 {
        position: absolute;
        top: 500px;
        font-size: 0px;
    }

    .list.grow .c1 {
        top: 100px;
        font-size: 0px;
    }

    .list.grow .c2 {
        top: 200px;
        font-size: 30px;
    }

    .list.grow .c3 {
        top: 300px;
        font-size: 40px;
    }

    .list.grow .c4 {
        top: 400px;
        font-size: 30px;
    }

    .list.shrink .c1 {
        top: 200px;
        font-size: 30px;
    }

    .list.shrink .c2 {
        top: 300px;
        font-size: 40px;
    }

    .list.shrink .c3 {
        top: 400px;
        font-size: 30px;
    }

    .list.shrink .c4 {
        top: 500px;
        font-size: 0px;
    }
</style>

</html>